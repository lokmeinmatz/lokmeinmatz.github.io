{"dependencies":[{"name":"D:\\Programmieren\\GitHub\\lokmeinmatz.github.io\\UNO\\tsconfig.json","includedInParent":true,"mtime":1518443105776},{"name":"./jquery.js","loc":{"line":3,"column":21}},{"name":"./colors","loc":{"line":4,"column":25}}],"generated":{"js":"\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar jquery = require(\"./jquery.js\");\r\nconst colors_1 = require(\"./colors\");\r\nconsole.log(colors_1.cardColors);\r\nwindow.$ = window.jQuery = jquery; // notice the definition of global variables here\r\nlet selectedHand = null;\r\nlet selectedPreview = null;\r\nlet deck = [\"r4\", \"g7\", \"b2\", \"y9\", \"r8\", \"g3\", \"b6\", \"y3\"];\r\nfunction setHandClickHandler() {\r\n    $(\"#handcards .handcard\").off(\"click\");\r\n    $(\"#handcards .handcard\").click(function () {\r\n        if (selectedHand) {\r\n            //sets scale of handcard to 1\r\n            selectedHand.removeClass(\"selected\");\r\n        }\r\n        if (!selectedHand || selectedHand.first().get(0) != $(this).get(0)) {\r\n            selectedHand = $(this);\r\n            //get cardtype\r\n            const ct = selectedHand.data(\"cardtype\");\r\n            setPreviewCard(ct);\r\n            selectedPreview.addClass(\"open\");\r\n            selectedHand.addClass(\"selected\");\r\n        }\r\n        else {\r\n            selectedHand = null;\r\n        }\r\n    });\r\n}\r\n$(document).ready(() => {\r\n    var socket = io.connect();\r\n    //get canvas\r\n    //Set ui colors\r\n    const body = $(\"body\").get(0);\r\n    body.style.setProperty(\"--verylight\", colors_1.uiColors.verylight);\r\n    body.style.setProperty(\"--light\", colors_1.uiColors.light);\r\n    body.style.setProperty(\"--medium\", colors_1.uiColors.medium);\r\n    body.style.setProperty(\"--dark\", colors_1.uiColors.dark);\r\n    body.style.setProperty(\"--verydark\", colors_1.uiColors.verydark);\r\n    body.style.setProperty(\"--active\", colors_1.uiColors.active);\r\n    //Set modal handlers\r\n    $(\".tab-btn#tab-join-btn\").click(function () {\r\n        $(this).addClass(\"active\");\r\n        $(\".tab-btn#tab-create-btn\").removeClass(\"active\");\r\n        //set modals\r\n        $(\".tab-content#create-session-tab\").removeClass(\"active\");\r\n        $(\".tab-content#join-session-tab\").addClass(\"active\");\r\n    });\r\n    $(\".tab-btn#tab-create-btn\").click(function () {\r\n        $(this).addClass(\"active\");\r\n        $(\".tab-btn#tab-join-btn\").removeClass(\"active\");\r\n        //set modals\r\n        $(\".tab-content#join-session-tab\").removeClass(\"active\");\r\n        $(\".tab-content#create-session-tab\").addClass(\"active\");\r\n    });\r\n    //handle join \r\n    $(\"#join-session-tab form\").submit(function (event) {\r\n        event.preventDefault();\r\n        //Send reqest to join\r\n        const sid = $(this).children(\"#sessionID\").val();\r\n        const nick = $(this).children(\"#nickname\").val();\r\n        console.log(`trying to join ${sid} with nick ${nick}`);\r\n        socket.emit(\"join\", { sessionID: sid, nickname: nick });\r\n    });\r\n    //get join-response\r\n    socket.on(\"join.res\", (res) => {\r\n        console.log(res);\r\n        if (res.success) {\r\n            //Get to waiting lobby\r\n            $(\".modal#connect\").removeClass(\"active\");\r\n            $(\".modal#waiting\").addClass(\"active\");\r\n        }\r\n        else {\r\n            //display error\r\n            alert(\"Error on joining/creating session\");\r\n        }\r\n    });\r\n    //handle create\r\n    $(\"#create-session-tab form\").submit(function (event) {\r\n        event.preventDefault();\r\n        //Send reqest to join\r\n        const nick = $(this).children(\"#nickname\").val();\r\n        console.log(`trying to create session with nick ${nick}`);\r\n        socket.emit(\"create\", nick);\r\n    });\r\n    socket.on(\"waiting.update\", (data) => {\r\n        console.log(\"received waiting.update\");\r\n        //Set session id\r\n        $(\".modal#waiting h1\").text(\"SessionID: \" + data.sessionID);\r\n        const root = $(\".modal#waiting table\");\r\n        root.children().remove();\r\n        for (let player of data.players) {\r\n            const tr = $(\"<tr>\");\r\n            tr.append(\"<td>\" + player.name + \"</td>\");\r\n            tr.append(\"<td>\" + player.id + \"</td>\");\r\n            root.append(tr);\r\n        }\r\n    });\r\n    updateDeck();\r\n    for (let i = 0; i < 4; i++) {\r\n        addHandCard(deck.pop());\r\n    }\r\n    selectedPreview = $(\"#selected-card\");\r\n    setHandClickHandler();\r\n    $(\"#selected-card\").click(function () {\r\n        //close selectedPreview if is clicked    \r\n        selectedPreview.removeClass(\"open\");\r\n        //show hand card\r\n        if (selectedHand) {\r\n            //sets scale of handcard to 1\r\n            selectedHand.removeClass(\"selected\");\r\n        }\r\n    });\r\n    $(\".play\").click(function () {\r\n        //get type of card\r\n        const ct = selectedPreview.data(\"cardtype\");\r\n        console.log(\"Playing card \" + ct);\r\n        //remove card from hand\r\n        selectedHand.remove();\r\n        addPlayedCard(ct);\r\n    });\r\n    socket.on(\"block\", (data) => {\r\n    });\r\n});\r\nfunction updateDeck() {\r\n    const Jdeck = $(\"#deck\");\r\n    Jdeck.children().remove();\r\n    for (let i = 0; i < deck.length; i++) {\r\n        const card = $(\"<div class='card deck-card'>\");\r\n        card.css(\"left\", i * 5);\r\n        card.css(\"top\", i * 5);\r\n        Jdeck.append(card);\r\n        card.click(function () {\r\n            //add card to hand, if playable: preview\r\n            if (deck.length > 0) {\r\n                let cardType = deck.pop();\r\n                addHandCard(cardType);\r\n                setHandClickHandler();\r\n                updateDeck();\r\n            }\r\n        });\r\n    }\r\n}\r\nfunction setDirection(clockwise) {\r\n    const spinner = $(\".spinner\");\r\n    const container = $(\".spinner-div\");\r\n    container.addClass(\"zoom\");\r\n    window.setTimeout(() => {\r\n        if (clockwise)\r\n            spinner.removeClass(\"ccw\");\r\n        else\r\n            spinner.addClass(\"ccw\");\r\n    }, 250);\r\n    //remove zoom class\r\n    window.setTimeout(() => {\r\n        container.removeClass(\"zoom\");\r\n    }, 500);\r\n}\r\nfunction addPlayedCard(cardType) {\r\n    const root = $(\"#played-cards\");\r\n    if (root.children().length > 6) {\r\n        root.children().first().remove();\r\n    }\r\n    //Set transparency\r\n    root.children().each((index, val) => {\r\n        $(val).css(\"opacity\", 1.0 - (index / 10));\r\n    });\r\n    const card = $(\"<p class='card'>\");\r\n    if (cardType.charAt(0) == \"r\")\r\n        card.css(\"background-color\", colors_1.cardColors.red);\r\n    else if (cardType.charAt(0) == \"g\")\r\n        card.css(\"background-color\", colors_1.cardColors.green);\r\n    else if (cardType.charAt(0) == \"b\")\r\n        card.css(\"background-color\", colors_1.cardColors.blue);\r\n    else if (cardType.charAt(0) == \"y\")\r\n        card.css(\"background-color\", colors_1.cardColors.yellow);\r\n    card.text(cardType.charAt(1));\r\n    card.css(\"transform\", \"rotate(\" + (Math.random() * 50 - 25) + \"deg)\");\r\n    root.append(card);\r\n}\r\nfunction addHandCard(cardType) {\r\n    const root = $(\"#handcards\");\r\n    const card = $(\"<p class='card handcard'>\");\r\n    if (cardType.charAt(0) == \"r\")\r\n        card.css(\"background-color\", colors_1.cardColors.red);\r\n    else if (cardType.charAt(0) == \"g\")\r\n        card.css(\"background-color\", colors_1.cardColors.green);\r\n    else if (cardType.charAt(0) == \"b\")\r\n        card.css(\"background-color\", colors_1.cardColors.blue);\r\n    else if (cardType.charAt(0) == \"y\")\r\n        card.css(\"background-color\", colors_1.cardColors.yellow);\r\n    card.text(cardType.charAt(1));\r\n    card.data(\"cardtype\", cardType);\r\n    root.append(card);\r\n}\r\nfunction setPreviewCard(cardType) {\r\n    if (cardType.charAt(0) == \"r\")\r\n        selectedPreview.css(\"background-color\", colors_1.cardColors.red);\r\n    else if (cardType.charAt(0) == \"g\")\r\n        selectedPreview.css(\"background-color\", colors_1.cardColors.green);\r\n    else if (cardType.charAt(0) == \"b\")\r\n        selectedPreview.css(\"background-color\", colors_1.cardColors.blue);\r\n    else if (cardType.charAt(0) == \"y\")\r\n        selectedPreview.css(\"background-color\", colors_1.cardColors.yellow);\r\n    selectedPreview.find(\"#num\").text(cardType.charAt(1));\r\n    selectedPreview.data(\"cardtype\", cardType);\r\n}\r\n","map":{"version":3,"file":"app.js","sourceRoot":"","sources":["app.ts"],"names":[],"mappings":"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","sourcesContent":["import { setTimeout } from \"timers\";\r\n\r\nvar jquery = require(\"./jquery.js\");\r\nimport {cardColors, uiColors} from \"./colors\"\r\nconsole.log(cardColors)\r\nwindow.$ = window.jQuery = jquery; // notice the definition of global variables here\r\n\r\nlet selectedHand : JQuery = null\r\nlet selectedPreview : JQuery = null\r\n\r\n\r\nlet deck: string[] = [\"r4\", \"g7\", \"b2\", \"y9\", \"r8\", \"g3\", \"b6\", \"y3\"]\r\n\r\n\r\nfunction setHandClickHandler() {\r\n    $(\"#handcards .handcard\").off(\"click\")\r\n    $(\"#handcards .handcard\").click(function(){\r\n\r\n        \r\n        if(selectedHand) {\r\n            //sets scale of handcard to 1\r\n            selectedHand.removeClass(\"selected\")\r\n        }\r\n\r\n        if(!selectedHand || selectedHand.first().get(0) != $(this).get(0)) {\r\n            selectedHand = $(this)\r\n            //get cardtype\r\n            const ct = selectedHand.data(\"cardtype\")\r\n            setPreviewCard(ct)\r\n\r\n            selectedPreview.addClass(\"open\")\r\n            selectedHand.addClass(\"selected\")\r\n\r\n        }\r\n        else {\r\n            selectedHand = null\r\n        }\r\n        \r\n\r\n    })\r\n}\r\n\r\n$(document).ready(() => {\r\n    var socket : SocketIO.Socket = io.connect()\r\n    //get canvas\r\n\r\n    //Set ui colors\r\n    const body = $(\"body\").get(0)\r\n    body.style.setProperty(\"--verylight\", uiColors.verylight)\r\n    body.style.setProperty(\"--light\", uiColors.light)\r\n    body.style.setProperty(\"--medium\", uiColors.medium)\r\n    body.style.setProperty(\"--dark\", uiColors.dark)\r\n    body.style.setProperty(\"--verydark\", uiColors.verydark)\r\n    body.style.setProperty(\"--active\", uiColors.active)\r\n\r\n\r\n\r\n    //Set modal handlers\r\n    $(\".tab-btn#tab-join-btn\").click(function() {\r\n        $(this).addClass(\"active\")\r\n        $(\".tab-btn#tab-create-btn\").removeClass(\"active\")\r\n\r\n        //set modals\r\n        $(\".tab-content#create-session-tab\").removeClass(\"active\")\r\n        $(\".tab-content#join-session-tab\").addClass(\"active\")\r\n    })\r\n    $(\".tab-btn#tab-create-btn\").click(function() {\r\n        $(this).addClass(\"active\")\r\n        $(\".tab-btn#tab-join-btn\").removeClass(\"active\")\r\n\r\n        //set modals\r\n        $(\".tab-content#join-session-tab\").removeClass(\"active\")\r\n        $(\".tab-content#create-session-tab\").addClass(\"active\")\r\n    })\r\n\r\n    //handle join \r\n    $(\"#join-session-tab form\").submit(function(event) {\r\n        event.preventDefault()\r\n        //Send reqest to join\r\n        const sid = $(this).children(\"#sessionID\").val()\r\n        const nick = $(this).children(\"#nickname\").val()\r\n        console.log(`trying to join ${sid} with nick ${nick}`)\r\n        socket.emit(\"join\", {sessionID : sid, nickname: nick})\r\n    })\r\n\r\n    //get join-response\r\n    socket.on(\"join.res\", (res) => {\r\n        console.log(res)\r\n        if(res.success) {\r\n            //Get to waiting lobby\r\n            $(\".modal#connect\").removeClass(\"active\")\r\n            $(\".modal#waiting\").addClass(\"active\")\r\n\r\n\r\n        }\r\n        else {\r\n            //display error\r\n            alert(\"Error on joining/creating session\")\r\n        }\r\n    })\r\n\r\n\r\n    //handle create\r\n    $(\"#create-session-tab form\").submit(function(event) {\r\n        event.preventDefault()\r\n        //Send reqest to join\r\n        const nick = $(this).children(\"#nickname\").val()\r\n        console.log(`trying to create session with nick ${nick}`)\r\n        socket.emit(\"create\", nick)\r\n    })\r\n    \r\n    socket.on(\"waiting.update\", (data) => {\r\n        console.log(\"received waiting.update\")\r\n        \r\n        //Set session id\r\n        $(\".modal#waiting h1\").text(\"SessionID: \"+data.sessionID)\r\n\r\n        const root = $(\".modal#waiting table\")\r\n        root.children().remove()\r\n        for(let player of data.players) {\r\n            const tr = $(\"<tr>\")\r\n            tr.append(\"<td>\"+player.name+\"</td>\")\r\n            tr.append(\"<td>\"+player.id+\"</td>\")\r\n            root.append(tr)\r\n        }\r\n    })\r\n\r\n    updateDeck()\r\n\r\n    for(let i = 0; i < 4; i++) {\r\n        addHandCard(deck.pop())\r\n    }\r\n\r\n    \r\n\r\n    selectedPreview = $(\"#selected-card\")\r\n\r\n    setHandClickHandler()\r\n    \r\n    $(\"#selected-card\").click(function() {\r\n        //close selectedPreview if is clicked    \r\n        selectedPreview.removeClass(\"open\")\r\n\r\n        //show hand card\r\n        if(selectedHand) {\r\n            //sets scale of handcard to 1\r\n            selectedHand.removeClass(\"selected\")\r\n        }\r\n    })\r\n\r\n\r\n    $(\".play\").click(function() {\r\n        //get type of card\r\n        const ct = selectedPreview.data(\"cardtype\")\r\n        console.log(\"Playing card \"+ct)\r\n        //remove card from hand\r\n        selectedHand.remove()\r\n        addPlayedCard(ct)\r\n    })\r\n\r\n    socket.on(\"block\", (data) => {\r\n        \r\n        \r\n        \r\n    })\r\n\r\n   \r\n\r\n\r\n})\r\n\r\n\r\nfunction updateDeck() {\r\n    const Jdeck = $(\"#deck\")\r\n    Jdeck.children().remove()\r\n    for(let i = 0; i < deck.length; i++) {\r\n        const card = $(\"<div class='card deck-card'>\")\r\n        card.css(\"left\", i*5)\r\n        card.css(\"top\", i*5)\r\n        Jdeck.append(card)\r\n\r\n        card.click(function() {\r\n            //add card to hand, if playable: preview\r\n            if(deck.length > 0) {\r\n                let cardType = deck.pop()\r\n                addHandCard(cardType)\r\n                setHandClickHandler()\r\n                updateDeck()\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\nfunction setDirection(clockwise : boolean) {\r\n    const spinner = $(\".spinner\")\r\n    const container = $(\".spinner-div\")\r\n    container.addClass(\"zoom\")\r\n\r\n    window.setTimeout(() =>  {\r\n        if(clockwise)spinner.removeClass(\"ccw\")\r\n        else spinner.addClass(\"ccw\")\r\n    }, 250)\r\n\r\n    //remove zoom class\r\n    window.setTimeout(() => {\r\n        container.removeClass(\"zoom\")\r\n    }, 500)\r\n    \r\n}\r\n\r\nfunction addPlayedCard(cardType: string) {\r\n\r\n    \r\n    const root = $(\"#played-cards\")\r\n    if(root.children().length > 6) {\r\n        root.children().first().remove()\r\n    }\r\n\r\n    //Set transparency\r\n    root.children().each((index, val) => {\r\n        $(val).css(\"opacity\", 1.0 - (index/10))\r\n    })\r\n\r\n    const card = $(\"<p class='card'>\")\r\n    if(cardType.charAt(0) == \"r\")card.css(\"background-color\", cardColors.red)\r\n    else if(cardType.charAt(0) == \"g\")card.css(\"background-color\", cardColors.green)\r\n    else if(cardType.charAt(0) == \"b\")card.css(\"background-color\", cardColors.blue)\r\n    else if(cardType.charAt(0) == \"y\")card.css(\"background-color\", cardColors.yellow)\r\n\r\n    card.text(cardType.charAt(1))\r\n    card.css(\"transform\", \"rotate(\"+(Math.random()*50-25)+\"deg)\")\r\n    root.append(card)\r\n    \r\n}\r\n\r\nfunction addHandCard(cardType: string) {\r\n    const root = $(\"#handcards\")\r\n\r\n    const card = $(\"<p class='card handcard'>\")\r\n    if(cardType.charAt(0) == \"r\")card.css(\"background-color\", cardColors.red)\r\n    else if(cardType.charAt(0) == \"g\")card.css(\"background-color\",cardColors.green)\r\n    else if(cardType.charAt(0) == \"b\")card.css(\"background-color\", cardColors.blue)\r\n    else if(cardType.charAt(0) == \"y\")card.css(\"background-color\", cardColors.yellow)\r\n    card.text(cardType.charAt(1))\r\n    card.data(\"cardtype\", cardType)\r\n    root.append(card)\r\n}\r\n\r\nfunction setPreviewCard(cardType: string) {\r\n    if(cardType.charAt(0) == \"r\")selectedPreview.css(\"background-color\", cardColors.red)\r\n    else if(cardType.charAt(0) == \"g\")selectedPreview.css(\"background-color\",cardColors.green)\r\n    else if(cardType.charAt(0) == \"b\")selectedPreview.css(\"background-color\", cardColors.blue)\r\n    else if(cardType.charAt(0) == \"y\")selectedPreview.css(\"background-color\", cardColors.yellow)\r\n    selectedPreview.find(\"#num\").text(cardType.charAt(1))\r\n    selectedPreview.data(\"cardtype\", cardType)\r\n}"]}},"hash":"54ceb9a7768e4b2cd0c8f6af2fe28570","cacheData":{"env":{}}}